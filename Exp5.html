<!DOCTYPE html>
<html>
    <head>
        <title> EXP-5 DEMONSTRATION </EXP-5></title>
    </head>
    <body>
        <script type="text/javascript">

            const products = [
                { name: "Product 1", Price: 20,category:"Electronics"},
                { name: "Product 2", Price: 30,category:"Clothes"},
                { name: "Product 3", Price: 40,category:"Electronics"},
                { name: "Product 4", Price: 50,category:"Clothes"},
                { name: "Product 5", Price: 60,category:"Clothes"},
                { name: "Product 6", Price: 70,category:"Electronics"},
                { name: "Product 7", Price: 80,category:"Clothes"},
                { name: "Product 8", Price: 90,category:"Electronics"}
            ];

            // Use map to create a dictionary with category as the key  and an array of products as the value 

            const productsByCategory = products.reduce((acc,product) => {
                const category = product.category;

                if (!acc[category]) {
                    acc[category] = [];
                }
                
                acc[category].push(product);
                return acc;
            },{});

            //Use map to calculate the avg price for each category

            const avgPriceByCategory = Object.keys(productsByCategory).map(category => {
                const sum = productsByCategory[category].reduce((acc, product) => acc + product.price, 0);
                return { category: category, average: sum / productsByCategory[category].length };
            });
            
            //Use filter to only select categories with an avg above a certain threshold
            
            const highPricedCategories = avgPriceByCategory.filter(category => category.average > 50);
            console.log(highPricedCategories);

        </script>
    </body>
</html>
